(()=>{var e={};e.id=882,e.ids=[882],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8022:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>d}),s(5354),s(4728),s(5866);var r=s(3191),a=s(8716),n=s(7922),o=s.n(n),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d=["",{children:["conversation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5354)),"/home/dpm424/journal-vocal/src/app/conversation/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4728)),"/home/dpm424/journal-vocal/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/dpm424/journal-vocal/src/app/conversation/page.tsx"],u="/conversation/page",m={require:s,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/conversation/page",pathname:"/conversation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3139:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},3140:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,9404,23)),Promise.resolve().then(s.bind(s,3400)),Promise.resolve().then(s.bind(s,4609))},3632:(e,t,s)=>{Promise.resolve().then(s.bind(s,4092))},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},4092:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(326),a=s(7577),n=s(5047),o=s(1664);let i=()=>{let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(!1),[n,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=new WebSocket("wss://journal-vocal-backend.onrender.com");return e.onopen=()=>{r(!0),t(e)},e.onclose=()=>{r(!1),t(null)},e.onerror=e=>{o(e)},()=>{e.close()}},[]),{socket:e,isConnected:s,error:n}},l=e=>{let[t,s]=(0,a.useState)(!1),r=(0,a.useRef)(null);return{isRecording:t,startRecording:async()=>{let t=new MediaRecorder(await navigator.mediaDevices.getUserMedia({audio:!0}));r.current=t,t.ondataavailable=t=>{e(t.data)},t.start(),s(!0)},stopRecording:()=>{r.current&&(r.current.stop(),s(!1))}}};var d=s(1190);function c({onFilesChange:e}){let[t,s]=(0,a.useState)([]),[n,o]=(0,a.useState)([]);return(0,r.jsxs)("div",{className:"w-full max-w-2xl",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Images"}),r.jsx("div",{className:"mt-4",children:r.jsx(d.I,{type:"file",multiple:!0,onChange:t=>{if(t.target.files){let r=Array.from(t.target.files);s(t=>{let s=[...t,...r];return e(s),s});let a=r.map(e=>URL.createObjectURL(e));o(e=>[...e,...a])}}})}),r.jsx("div",{className:"mt-4 grid grid-cols-3 gap-4",children:n.map((e,t)=>r.jsx("img",{src:e,alt:`preview ${t}`,className:"w-full h-auto"},t))})]})}function u(){let e=(0,n.useRouter)(),{isConnected:t,error:s,socket:d}=i(),[u,m]=(0,a.useState)(""),[f,p]=(0,a.useState)([]),{isRecording:x,startRecording:h,stopRecording:g}=l(e=>{d&&d.readyState===WebSocket.OPEN&&d.send(e)}),v=async()=>{let t=new FormData;t.append("transcription",u),f.forEach(e=>{t.append("images",e)});let s=await fetch("/api/generate-article",{method:"POST",body:t}),r=await s.json();e.push(`/article?article=${r.article}`)};return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-8",children:[r.jsx("h1",{className:"text-4xl font-bold",children:"Enregistrement en cours..."}),(0,r.jsxs)("p",{className:"mt-4 text-lg",children:["\xc9tat de la connexion: ",t?"Connect\xe9":"D\xe9connect\xe9"]}),s&&(0,r.jsxs)("p",{className:"text-red-500",children:["Erreur: ",JSON.stringify(s)]}),r.jsx("div",{className:"mt-8",children:r.jsx(o.z,{onClick:()=>{x?g():h()},size:"lg",disabled:!t,children:x?"Arr\xeater l'enregistrement":"Commencer l'enregistrement"})}),(0,r.jsxs)("div",{className:"mt-8 w-full max-w-2xl",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Transcription"}),r.jsx("p",{className:"mt-4 text-lg",children:u})]}),r.jsx("div",{className:"mt-8 w-full max-w-2xl",children:r.jsx(c,{onFilesChange:p})}),r.jsx("div",{className:"mt-8",children:r.jsx(o.z,{onClick:v,size:"lg",disabled:!u,children:"G\xe9n\xe9rer l'article"})})]})}},3400:(e,t,s)=>{"use strict";s.d(t,{ModeToggle:()=>v});var r=s(326),a=s(7577),n=s(850),o=s(2607),i=s(4831),l=s(1664),d=s(4174),c=s(9183),u=s(2933),m=s(933),f=s(1223);let p=d.fC,x=d.xz;d.ZA,d.Uv,d.Tr,d.Ee,a.forwardRef(({className:e,inset:t,children:s,...a},n)=>(0,r.jsxs)(d.fF,{ref:n,className:(0,f.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...a,children:[s,r.jsx(c.Z,{className:"ml-auto h-4 w-4"})]})).displayName=d.fF.displayName,a.forwardRef(({className:e,...t},s)=>r.jsx(d.tu,{ref:s,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=d.tu.displayName;let h=a.forwardRef(({className:e,sideOffset:t=4,...s},a)=>r.jsx(d.Uv,{children:r.jsx(d.VY,{ref:a,sideOffset:t,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));h.displayName=d.VY.displayName;let g=a.forwardRef(({className:e,inset:t,...s},a)=>r.jsx(d.ck,{ref:a,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));function v(){let{setTheme:e}=(0,i.F)();return(0,r.jsxs)(p,{children:[r.jsx(x,{asChild:!0,children:(0,r.jsxs)(l.z,{variant:"outline",size:"icon",children:[r.jsx(n.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(o.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,r.jsxs)(h,{align:"end",children:[r.jsx(g,{onClick:()=>e("light"),children:"Light"}),r.jsx(g,{onClick:()=>e("dark"),children:"Dark"}),r.jsx(g,{onClick:()=>e("system"),children:"System"})]})]})}g.displayName=d.ck.displayName,a.forwardRef(({className:e,children:t,checked:s,...a},n)=>(0,r.jsxs)(d.oC,{ref:n,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(d.wU,{children:r.jsx(u.Z,{className:"h-4 w-4"})})}),t]})).displayName=d.oC.displayName,a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(d.Rk,{ref:a,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(d.wU,{children:r.jsx(m.Z,{className:"h-4 w-4 fill-current"})})}),t]})).displayName=d.Rk.displayName,a.forwardRef(({className:e,inset:t,...s},a)=>r.jsx(d.__,{ref:a,className:(0,f.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=d.__.displayName,a.forwardRef(({className:e,...t},s)=>r.jsx(d.Z0,{ref:s,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=d.Z0.displayName},4609:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>n});var r=s(326);s(7577);var a=s(4831);function n({children:e,...t}){return r.jsx(a.f,{...t,children:e})}},1664:(e,t,s)=>{"use strict";s.d(t,{z:()=>d});var r=s(326),a=s(7577),n=s(4214),o=s(9360),i=s(1223);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...o},d)=>{let c=a?n.g7:"button";return r.jsx(c,{className:(0,i.cn)(l({variant:t,size:s,className:e})),ref:d,...o})});d.displayName="Button"},1190:(e,t,s)=>{"use strict";s.d(t,{I:()=>o});var r=s(326),a=s(7577),n=s(1223);let o=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));o.displayName="Input"},1223:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(1135),a=s(1009);function n(...e){return(0,a.m6)((0,r.W)(e))}},5354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/home/dpm424/journal-vocal/src/app/conversation/page.tsx#default`)},4728:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m,metadata:()=>u});var r=s(9510),a=s(5317),n=s.n(a),o=s(7371),i=s(8570);let l=(0,i.createProxy)(String.raw`/home/dpm424/journal-vocal/src/components/ModeToggle.tsx#ModeToggle`);function d(){return r.jsx("header",{className:"p-4 border-b",children:(0,r.jsxs)("nav",{className:"flex items-center justify-between",children:[r.jsx(o.default,{href:"/",children:r.jsx("span",{className:"text-2xl font-bold",children:"Journal Vocal"})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(o.default,{href:"/articles",children:r.jsx("span",{className:"text-lg",children:"Mes articles"})}),r.jsx(l,{})]})]})})}let c=(0,i.createProxy)(String.raw`/home/dpm424/journal-vocal/src/components/ThemeProvider.tsx#ThemeProvider`);s(5023);let u={title:"Journal Vocal",description:"Transformez vos paroles en articles de blog."};function m({children:e}){return r.jsx("html",{lang:"fr",suppressHydrationWarning:!0,children:r.jsx("body",{className:n().className,children:(0,r.jsxs)(c,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[r.jsx(d,{}),e]})})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[315],()=>s(8022));module.exports=r})();